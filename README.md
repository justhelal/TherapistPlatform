# üè• Therapist Platform

A modern, microservices-based platform for managing therapist-patient relationships, appointments, and scheduling. Built with .NET 8, Entity Framework Core, and RabbitMQ for event-driven communication.

![Platform Overview](https://img.shields.io/badge/.NET-8.0-512BD4?style=for-the-badge&logo=.net&logoColor=white)
![Entity Framework](https://img.shields.io/badge/Entity_Framework-8.0-512BD4?style=for-the-badge&logo=.net&logoColor=white)
![RabbitMQ](https://img.shields.io/badge/RabbitMQ-FF6600?style=for-the-badge&logo=rabbitmq&logoColor=white)
![Docker](https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white)

## üìã Table of Contents

- [Overview](#overview)
- [Architecture](#architecture)
- [Features](#features)
- [Technology Stack](#technology-stack)
- [Project Structure](#project-structure)
- [Getting Started](#getting-started)
- [API Documentation](#api-documentation)
- [Database Schema](#database-schema)
- [Event-Driven Communication](#event-driven-communication)
- [Development](#development)
- [Contributing](#contributing)
- [License](#license)

## üéØ Overview

The Therapist Platform is a comprehensive solution designed to streamline the management of therapy services. It consists of two main microservices:

- **Patient API**: Manages patient information, appointments, and medical records
- **Therapist API**: Handles therapist profiles, schedules, and availability

The platform uses event-driven architecture with RabbitMQ for seamless communication between services, ensuring data consistency and real-time updates.

## üèóÔ∏è Architecture

### System Architecture Diagram

```mermaid
graph TB
    subgraph "Client Applications"
        Web[Web Client]
        Mobile[Mobile App]
        Admin[Admin Dashboard]
    end
    
    subgraph "API Gateway"
        Gateway[API Gateway]
    end
    
    subgraph "Microservices"
        PatientAPI[Patient API]
        TherapistAPI[Therapist API]
    end
    
    subgraph "Message Broker"
        RabbitMQ[RabbitMQ]
    end
    
    subgraph "Databases"
        PatientDB[(Patient Database)]
        TherapistDB[(Therapist Database)]
    end
    
    Web --> Gateway
    Mobile --> Gateway
    Admin --> Gateway
    Gateway --> PatientAPI
    Gateway --> TherapistAPI
    PatientAPI --> PatientDB
    TherapistAPI --> TherapistDB
    PatientAPI --> RabbitMQ
    TherapistAPI --> RabbitMQ
    RabbitMQ --> PatientAPI
    RabbitMQ --> TherapistAPI
```

### Service Communication Flow

```mermaid
sequenceDiagram
    participant C as Client
    participant PA as Patient API
    participant TA as Therapist API
    participant RQ as RabbitMQ
    participant PDB as Patient DB
    participant TDB as Therapist DB
    
    C->>PA: Create Appointment
    PA->>PDB: Save Appointment
    PA->>RQ: Publish AppointmentCreated
    RQ->>TA: Consume AppointmentCreated
    TA->>TDB: Update Schedule
    TA->>C: Return Success
```

## ‚ú® Features

### Patient Management
- üìù Patient registration and profile management
- üè• Medical history tracking
- üíä Medication and allergy management
- üìû Emergency contact information
- üè¶ Insurance information handling

### Therapist Management
- üë®‚Äç‚öïÔ∏è Therapist profile and credentials
- üìÖ Schedule and availability management
- üéØ Specialization tracking
- üí∞ Pricing and rate management
- üìã License and certification tracking

### Appointment System
- üìÖ Appointment scheduling and booking
- üîÑ Status tracking (Scheduled, Confirmed, Completed, Cancelled)
- ‚è∞ Time slot management
- üìß Automated notifications
- üìä Appointment analytics

### Event-Driven Features
- üîÑ Real-time data synchronization
- üì° Cross-service communication
- üöÄ Scalable architecture
- üîí Data consistency guarantees

## üõ†Ô∏è Technology Stack

| Component | Technology | Version |
|-----------|------------|---------|
| **Backend Framework** | .NET 8 | 8.0 |
| **ORM** | Entity Framework Core | 8.0 |
| **Database** | SQL Server | 2022 |
| **Message Broker** | RabbitMQ | 4.1.3 |
| **API Documentation** | Swagger/OpenAPI | 3.0 |
| **Containerization** | Docker | Latest |
| **Architecture Pattern** | Clean Architecture | - |
| **Communication** | REST APIs | - |

## üìÅ Project Structure

```
therapist/
‚îú‚îÄ‚îÄ üì¶ docker-compose.yml
‚îú‚îÄ‚îÄ üìã TherapistPlatform.sln
‚îî‚îÄ‚îÄ üìÇ src/
    ‚îú‚îÄ‚îÄ üè• PatientApi/
    ‚îÇ   ‚îú‚îÄ‚îÄ üì± PatientApi.Presentation/     # API Controllers & Configuration
    ‚îÇ   ‚îú‚îÄ‚îÄ üß† PatientApi.Application/      # Business Logic & Services
    ‚îÇ   ‚îú‚îÄ‚îÄ üèóÔ∏è PatientApi.Domain/          # Entities & Interfaces
    ‚îÇ   ‚îî‚îÄ‚îÄ üóÑÔ∏è PatientApi.Infrastructure/  # Data Access & External Services
    ‚îú‚îÄ‚îÄ üë®‚Äç‚öïÔ∏è TherapistApi/
    ‚îÇ   ‚îú‚îÄ‚îÄ üì± TherapistApi.Presentation/   # API Controllers & Configuration
    ‚îÇ   ‚îú‚îÄ‚îÄ üß† TherapistApi.Application/    # Business Logic & Services
    ‚îÇ   ‚îú‚îÄ‚îÄ üèóÔ∏è TherapistApi.Domain/        # Entities & Interfaces
    ‚îÇ   ‚îî‚îÄ‚îÄ üóÑÔ∏è TherapistApi.Infrastructure/ # Data Access & External Services
    ‚îî‚îÄ‚îÄ üîó Shared/
        ‚îú‚îÄ‚îÄ üì¶ Shared.Common/               # Common Models & Interfaces
        ‚îî‚îÄ‚îÄ üì° Shared.Events/               # Event Definitions
```

### Clean Architecture Layers

```mermaid
graph TD
    subgraph "Presentation Layer"
        Controllers[Controllers]
        DTOs[DTOs]
    end
    
    subgraph "Application Layer"
        Services[Services]
        Interfaces[Interfaces]
    end
    
    subgraph "Domain Layer"
        Entities[Entities]
        Enums[Enums]
        DomainInterfaces[Domain Interfaces]
    end
    
    subgraph "Infrastructure Layer"
        Repositories[Repositories]
        DbContext[DbContext]
        Messaging[Messaging]
    end
    
    Controllers --> Services
    Services --> DomainInterfaces
    Repositories --> DomainInterfaces
    Repositories --> DbContext
    Messaging --> Services
```

## üöÄ Getting Started

### Prerequisites

- [.NET 8 SDK](https://dotnet.microsoft.com/download/dotnet/8.0)
- [Docker Desktop](https://www.docker.com/products/docker-desktop)
- [SQL Server](https://www.microsoft.com/en-us/sql-server/sql-server-downloads) (or use Docker)
- [Visual Studio 2022](https://visualstudio.microsoft.com/) or [VS Code](https://code.visualstudio.com/)

### Quick Start

1. **Clone the repository**
   ```bash
   git clone https://github.com/yourusername/therapist-platform.git
   cd therapist-platform
   ```

2. **Start RabbitMQ using Docker**
   ```bash
   docker-compose up -d
   ```

3. **Configure connection strings**
   
   Update the connection strings in both API projects:
   
   ```json
   // PatientApi/appsettings.json
   {
     "ConnectionStrings": {
       "DefaultConnection": "Server=localhost;Database=PatientDb;Trusted_Connection=true;TrustServerCertificate=true;"
     }
   }
   ```

4. **Run database migrations**
   ```bash
   # Patient API
   cd src/PatientApi/PatientApi.Infrastructure
   dotnet ef database update
   
   # Therapist API
   cd ../../TherapistApi/TherapistApi.Infrastructure
   dotnet ef database update
   ```

5. **Run the applications**
   ```bash
   # Patient API
   cd ../../PatientApi/PatientApi.Presentation
   dotnet run
   
   # Therapist API (in a new terminal)
   cd ../../TherapistApi/TherapistApi.Presentation
   dotnet run
   ```

6. **Access the APIs**
   - Patient API: https://localhost:7001/swagger
   - Therapist API: https://localhost:7002/swagger
   - RabbitMQ Management: http://localhost:15672 (guest/guest)

## üìö API Documentation

### Patient API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/patients` | Get all patients |
| `GET` | `/api/patients/{id}` | Get patient by ID |
| `POST` | `/api/patients` | Create new patient |
| `PUT` | `/api/patients/{id}` | Update patient |
| `DELETE` | `/api/patients/{id}` | Delete patient |
| `GET` | `/api/appointments` | Get all appointments |
| `POST` | `/api/appointments` | Create appointment |
| `PUT` | `/api/appointments/{id}` | Update appointment |

### Therapist API Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| `GET` | `/api/therapists` | Get all therapists |
| `GET` | `/api/therapists/{id}` | Get therapist by ID |
| `POST` | `/api/therapists` | Create new therapist |
| `PUT` | `/api/therapists/{id}` | Update therapist |
| `GET` | `/api/schedule` | Get therapist schedules |
| `POST` | `/api/schedule` | Create schedule entry |

## üóÑÔ∏è Database Schema

### Patient Database Schema

```mermaid
erDiagram
    Patient {
        int Id PK
        string FirstName
        string LastName
        string Email
        string PhoneNumber
        datetime DateOfBirth
        enum Gender
        enum Status
        string Address
        string City
        string State
        string ZipCode
        string Country
        string EmergencyContactName
        string EmergencyContactPhone
        string InsuranceProvider
        string InsurancePolicyNumber
        string MedicalHistory
        string CurrentMedications
        string Allergies
        datetime CreatedAt
        datetime UpdatedAt
    }
    
    Appointment {
        int Id PK
        int PatientId FK
        int TherapistId FK
        datetime AppointmentDate
        int Duration
        enum Status
        string Notes
        datetime CreatedAt
        datetime UpdatedAt
    }
    
    Patient ||--o{ Appointment : has
```

### Therapist Database Schema

```mermaid
erDiagram
    Therapist {
        int Id PK
        string FirstName
        string LastName
        string Email
        string PhoneNumber
        string LicenseNumber
        enum Specialization
        enum Status
        datetime LicenseExpiryDate
        int YearsOfExperience
        string Biography
        decimal HourlyRate
        string Address
        string City
        string State
        string ZipCode
        string Country
        datetime CreatedAt
        datetime UpdatedAt
    }
    
    TherapistSchedule {
        int Id PK
        int TherapistId FK
        datetime StartTime
        datetime EndTime
        bool IsAvailable
        string Notes
        datetime CreatedAt
        datetime UpdatedAt
    }
    
    Therapist ||--o{ TherapistSchedule : has
```

## üì° Event-Driven Communication

The platform uses RabbitMQ for event-driven communication between services. Here are the main events:

### Event Flow Diagram

```mermaid
graph LR
    subgraph "Patient API Events"
        PC[PatientCreated]
        AC[AppointmentCreated]
        AU[AppointmentUpdated]
    end
    
    subgraph "Therapist API Events"
        TC[TherapistCreated]
        SC[ScheduleCreated]
        SU[ScheduleUpdated]
    end
    
    subgraph "Event Consumers"
        PC --> TC
        AC --> SC
        AU --> SU
    end
```

### Event Types

| Event | Publisher | Consumers | Description |
|-------|-----------|-----------|-------------|
| `PatientCreated` | Patient API | Therapist API | New patient registration |
| `AppointmentCreated` | Patient API | Therapist API | New appointment booking |
| `AppointmentUpdated` | Patient API | Therapist API | Appointment modification |
| `TherapistCreated` | Therapist API | Patient API | New therapist registration |
| `ScheduleCreated` | Therapist API | Patient API | New schedule entry |
| `ScheduleUpdated` | Therapist API | Patient API | Schedule modification |

## üõ†Ô∏è Development

### Development Workflow

```mermaid
graph LR
    A[Feature Branch] --> B[Development]
    B --> C[Code Review]
    C --> D[Testing]
    D --> E[Merge to Main]
    E --> F[Deploy]
```

### Running Tests

```bash
# Run all tests
dotnet test

# Run specific project tests
dotnet test src/PatientApi/PatientApi.Tests/
dotnet test src/TherapistApi/TherapistApi.Tests/
```

### Code Quality

The project follows clean architecture principles and best practices:

- ‚úÖ **SOLID Principles**
- ‚úÖ **Dependency Injection**
- ‚úÖ **Repository Pattern**
- ‚úÖ **CQRS Pattern**
- ‚úÖ **Event-Driven Architecture**
- ‚úÖ **API Versioning**
- ‚úÖ **Error Handling**
- ‚úÖ **Logging**

### Environment Configuration

```json
{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AllowedHosts": "*",
  "ConnectionStrings": {
    "DefaultConnection": "Server=localhost;Database=TherapistDb;Trusted_Connection=true;TrustServerCertificate=true;"
  },
  "RabbitMQ": {
    "Host": "localhost",
    "Username": "guest",
    "Password": "guest"
  }
}
```

## ü§ù Contributing

We welcome contributions! Please follow these steps:

1. **Fork the repository**
2. **Create a feature branch** (`git checkout -b feature/amazing-feature`)
3. **Commit your changes** (`git commit -m 'Add amazing feature'`)
4. **Push to the branch** (`git push origin feature/amazing-feature`)
5. **Open a Pull Request**

### Contribution Guidelines

- üìù Follow the existing code style
- üß™ Add tests for new features
- üìö Update documentation
- üîç Ensure all tests pass
- üìã Use conventional commit messages

## üìÑ License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## üìû Support

For support and questions:

- üìß Email: support@therapistplatform.com
- üêõ Issues: [GitHub Issues](https://github.com/yourusername/therapist-platform/issues)
- üìñ Documentation: [Wiki](https://github.com/yourusername/therapist-platform/wiki)

---

<div align="center">

**Made with ‚ù§Ô∏è for better healthcare management**

[![GitHub stars](https://img.shields.io/github/stars/yourusername/therapist-platform?style=social)](https://github.com/yourusername/therapist-platform/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/yourusername/therapist-platform?style=social)](https://github.com/yourusername/therapist-platform/network)
[![GitHub issues](https://img.shields.io/github/issues/yourusername/therapist-platform)](https://github.com/yourusername/therapist-platform/issues)

</div>
